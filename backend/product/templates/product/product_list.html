{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MJ Store - Premium Products</title>

    <!-- Google Fonts (Inter + Playfair Display) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
          rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/products.css' %}">
</head>
<body>

    <!-- Header with Navigation -->
    <header>
        <nav>
            <ul class="nav-links">
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a href="{% url 'about' %}">About</a></li>
                <li><a href="{% url 'contact' %}">Contact</a></li>
                <li><a href="{% url 'products' %}" class="active">Shop</a></li>
                <li><a href="{% url 'help' %}">Help</a></li>

                {% if user.is_authenticated %}
                    <li><a href="{% url 'logout_view' %}">Logout</a></li>
                {% else %}
                    <li><a href="{% url 'login_view' %}">Login</a></li>
                    <li><a href="{% url 'signup' %}">Signup</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    <!-- Main Product Section -->
    <main class="products-container">
        <section class="hero-section">
            <h1>Premium Collection</h1>
            <p class="subtitle">Discover luxury products at <span class="brand-highlight">MJ Global Store</span></p>
        </section>

        <section class="product-grid">
            {% for product in products %}
            <article class="product-card">
                <!-- Product Image -->
                {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
                {% else %}
                <div class="product-image placeholder" aria-label="No image available"></div>
                {% endif %}

                <!-- Product Info -->
                <div class="product-content">
                    <h2 class="product-name">{{ product.name }}</h2>
                    <p class="product-price">Rs ${{ product.price | floatformat:2 }}</p>
                    <p class="product-description">{{ product.description|truncatewords:20 }}</p>

                    <div class="product-stock">
                        {% if product.stock > 10 %}
                            <span class="stock-indicator in-stock"></span>
                            <span>In Stock ({{ product.stock }} available)</span>
                        {% elif product.stock > 0 %}
                            <span class="stock-indicator low-stock"></span>
                            <span>Only {{ product.stock }} left!</span>
                        {% else %}
                            <span class="stock-indicator out-of-stock"></span>
                            <span>Out of Stock</span>
                        {% endif %}
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="product-actions">
                    {% if product.stock > 0 %}
                        <button class="btn btn-primary" aria-label="Add {{ product.name }} to cart">
                            Add to Cart
                        </button>
                        <button class="btn btn-secondary" aria-label="Buy {{ product.name }} now">
                            Buy Now
                        </button>
                    {% else %}
                        <button class="btn btn-disabled" disabled>Out of Stock</button>
                    {% endif %}
                </div>
            </article>
            {% empty %}
            <div class="no-products">
                <p>No products available at the moment. Please check back later.</p>
            </div>
            {% endfor %}
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2023 M-J Store. All rights reserved.</p>
        <p>
            <a href="{% url 'policies' %}">Privacy Policy</a> |
            <a href="{% url 'terms' %}">Terms of Service</a> |
            <a href="{% url 'help' %}">Help Center</a>
        </p>
    </footer>
</body>
</html>
